<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PINEAPPLE MYSTERY - NO DUPLICATES</title>
<style>
  :root { 
    --bg: #050505; --accent: #f4d03f; --red: #cc0000; --blue: #2b57ff; --green: #28a745; 
    --kiwi: #00ff00; --bberry: #4facfe; --pink: #ff69b4; --gold: #b8860b;
  }
  body { font-family: 'Courier New', monospace; background: var(--bg); color: #e0e0e0; margin: 0; text-align: center; transition: 0.8s; height: 100vh; overflow: hidden; }
  body.kiwi-mode { --accent: var(--kiwi); color: var(--kiwi); }
  body.blueberry-mode { --accent: var(--bberry); color: #fff; }
  body.eden-active { background: #fff !important; color: #000 !important; }
  body.equinox-mode { background: #111 !important; color: #fff !important; }

  body.equinox-mode .t-top { background: #ffffff !important; color: #000 !important; }
  body.equinox-mode .t-bottom { background: #000000 !important; color: #ffffff !important; border-top: 1px solid #333; }

  .ticker-wrap { width: 100%; overflow: hidden; background: var(--accent); color: #000; padding: 5px 0; font-weight: 900; position: fixed; z-index: 100; top: 0; transition: 0.5s; }
  .t-bottom { top: auto; bottom: 0; }
  .ticker { display: inline-block; white-space: nowrap; animation: ticker 30s linear infinite; }
  @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

  .wrapper { height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box; }
  .card { background: rgba(15,15,15,0.95); padding: 30px; border-radius: 20px; border: 1px solid #333; width: 100%; max-width: 380px; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 10; display: none; }

  .btn { background: #111; color: #fff; border: 1px solid #333; padding: 15px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 10px; font-weight: bold; }
  
  #debug-panel { max-height: 200px; overflow-y: auto; margin-top: 15px; text-align: left; font-size: 11px; border: 1px dashed var(--accent); padding: 10px; }
  .p-setting { margin-bottom: 8px; border-bottom: 1px solid #222; padding-bottom: 5px; display: flex; justify-content: space-between; align-items: center; }
  select { background: #000; color: var(--accent); border: 1px solid #333; font-size: 10px; }

  #role { font-size: 45px; font-weight: 900; margin-bottom: 10px; }
  #skill { font-size: 28px; font-weight: bold; margin-bottom: 10px; }
  .sk-gun { background: linear-gradient(45deg, #ff0000, #0000ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .sk-pink { color: var(--pink); } .sk-gold { color: var(--gold); }
  .sk-eden { color: #ff0000; text-shadow: 0 0 10px rgba(255,0,0,0.5); }
  .sk-bberry-devil { color: var(--bberry); font-style: italic; }
</style>
</head>
<body>

<div class="ticker-wrap t-top"><div class="ticker">PINEAPPLE SYSTEM ONLINE 0217 üçç CORE SECURED üçç</div></div>

<div id="h-screen" style="display:none; position:fixed; width:100%; height:100%; background:#000; z-index:200; flex-direction:column; justify-content:center; align-items:center;">
  <div style="color:#fff; font-weight:bold;">INITIALIZING SYSTEM...</div>
  <div style="width:200px; height:3px; background:#222; margin-top:15px;"><div id="p-bar" style="width:0%; height:100%; background:#fff;"></div></div>
</div>

<div class="wrapper">
  <div id="menu" class="card" style="display: block;">
    <h1 id="m-title" style="color:var(--accent); letter-spacing:5px;">PINEAPPLE</h1>
    <p id="m-desc" style="font-size:10px; color:#555; margin-bottom:20px;">DOMINANT SYSTEM</p>
    <div>PLAYER: <input type="number" id="pCount" min="4" max="20" value="6" onchange="updateAdminUI()" style="background:none; border:none; border-bottom:1px solid #444; color:#fff; width:45px; text-align:center;"></div>
    <button onclick="bootSystem()" class="btn" style="color:var(--accent);">START SYSTEM</button>
    <div id="debug-panel" style="display:none;">
      TYPE: <select id="forceType" style="margin-bottom:10px;"><option value="none">RANDOM</option><option value="Standard">Standard</option><option value="Chillsear">Chillsear</option><option value="Zombie">Zombie</option><option value="Eden">Eden</option></select>
      <div id="p-list"></div>
    </div>
    <span onclick="openAdmin()" style="font-size:10px; color:#1a1a1a; cursor:pointer; display:block; margin-top:20px;">[ADMIN]</span>
  </div>

  <div id="draw-area" class="card">
    <div id="pNum" style="color:#888; font-size:22px; margin-bottom:30px;">PLAYER 1</div>
    <button onclick="reveal()" class="btn" style="background:var(--red); height:80px; font-size:20px;">ACCESS ROLE</button>
  </div>

  <div id="result" class="card" style="background:#fdfdfd !important; color:#111 !important;">
    <div id="role"></div>
    <div id="skill"></div>
    <div id="desc" style="font-size:15px; color:#444; margin-bottom:20px; line-height:1.5;"></div>
    <button onclick="next()" class="btn" style="background:#000; color:#fff;">CONFIRM</button>
  </div>

  <div id="final-screen" class="card">
    <div id="fType" style="font-size:40px; font-weight:900;"></div>
    <div id="fDesc" style="color:#888; margin-bottom:20px; font-size:14px;"></div>
    <button onclick="location.reload()" class="btn" style="color:#444; border:none; margin-top:10px;">REBOOT</button>
  </div>
</div>

<div class="ticker-wrap t-bottom"><div class="ticker">PINEAPPLE CORP üçç 0217 üçç EQUINOX 619 üçç</div></div>

<script>
const getPool = () => ({
  Î®∏Îçî: [{n:"Î∞©ÌÉÑ", d:"Ìïú Î≤à Í≥µÍ≤©ÏùÑ Î≤ÑÌåÅÎãàÎã§. (2Î™©Ïà®)"}, {n:"Í∞ÄÎ∞©", d:"Ï£ΩÏù∏ ÎåÄÏÉÅÏù¥ ÏÇ¥ÏïÑÏûàÎäî Í≤ÉÏ≤òÎüº ÌñâÎèôÌï©ÎãàÎã§."}, {n:"Ï¥ùÏû°Ïù¥", d:"Î≥¥ÏïàÍ¥ÄÍ≥º Í∞ôÏùÄ Î∞©ÏãùÏúºÎ°ú Ï≤òÏπòÌï©ÎãàÎã§.", s:"sk-gun"}],
  Î≥¥ÏïàÍ¥Ä: [{n:"Í∞ïÏù∏Ìïú", d:"Î™©Ïà®Ïù¥ 2Í∞úÍ∞Ä Îê©ÎãàÎã§."}, {n:"ÎßàÌîºÏïÑ", d:"Î™®Îëê Ï†úÍ±∞ Ïãú Ï¶âÏãú ÏäπÎ¶¨Ìï©ÎãàÎã§.", s:"sk-gold"}],
  ÏùòÏÇ¨: [{n:"ÏûêÍ∞ÄÏπòÏú†", d:"ÏûêÏã†ÏùÑ 1Ìöå ÏπòÎ£åÌï† Ïàò ÏûàÏäµÎãàÎã§."}, {n:"Ï†ÑÎ¨∏ ÏùòÏÇ¨", d:"ÏµúÎåÄ 2Î™ÖÍπåÏßÄ ÏπòÎ£åÌï† Ïàò ÏûàÏäµÎãàÎã§."}],
  ÏãúÎØº: [{n:"Ïä§ÌååÏù¥", d:"ÏãúÎØº Ï†úÍ±∞ Ïãú Î™©Ïà® Ï¶ùÍ∞Ä, Î®∏Îçî Ï≤òÏπò Ïãú ÏäπÎ¶¨.", s:"sk-gold"}, {n:"ÌçºÎ∏îwin", d:"Í∞ÄÏû• Î®ºÏ†Ä Ï£ΩÏúºÎ©¥ ÏãúÎØº ÏäπÎ¶¨ÏûÖÎãàÎã§.", s:"sk-pink"}, {n:"Ìå®ÎßÅ", d:"Ìïú Î≤à Í≥µÍ≤©ÏùÑ ÎßâÏïÑÎÉÖÎãàÎã§."}]
});

const mTypes = [
  {n:"Standard", w:59, d:"Ï∂îÍ∞Ä Îä•Î†•Ïù¥ Ìè¨Ìï®Îêú Í∏∞Î≥∏ ÎùºÏö¥Îìú.", c:"var(--red)"}, 
  {n:"Chillsear", w:30, d:"ÏùòÏÇ¨Í∞Ä ÏπòÎ£åÌï† Ïàò ÏóÜÎäî ÏïîÏÇ¥ ÎùºÏö¥Îìú.", c:"#87CEEB"}, 
  {n:"Zombie", w:10, d:"Ï£ΩÏùÄ ÏûêÍ∞Ä Ï¢ÄÎπÑÍ∞Ä ÎêòÎäî Í∞êÏóº ÎùºÏö¥Îìú.", c:"#32CD32"}, 
  {n:"Eden", w:1, d:"[SYSTEM ERROR] Î®∏ÎçîÏùò Î™©Ïà®Ïù¥ 5Í∞úÍ∞Ä Îê©ÎãàÎã§.", c:"#000000"}
];

let tP, cur, rls, rMT, aS;

function hideAll() { document.querySelectorAll('.card').forEach(c => c.style.display = 'none'); }
function openAdmin() {
  const pw = prompt("CODE:");
  if(pw === "9245" || pw === "1441") {
    document.body.className = pw === "9245" ? "kiwi-mode" : "blueberry-mode";
    document.getElementById("debug-panel").style.display = "block";
    updateAdminUI();
  }
}

function updateAdminUI() {
  const cnt = document.getElementById("pCount").value;
  const list = document.getElementById("p-list");
  list.innerHTML = "";
  for(let i=0; i<cnt; i++) {
    list.innerHTML += `<div class="p-setting">P${i+1}: <select id="p${i}r"><option value="none">RAND</option><option value="Î®∏Îçî">Î®∏Îçî</option><option value="Î≥¥ÏïàÍ¥Ä">Î≥¥ÏïàÍ¥Ä</option><option value="ÏùòÏÇ¨">ÏùòÏÇ¨</option><option value="ÏãúÎØº">ÏãúÎØº</option></select></div>`;
  }
}

function bootSystem() {
  document.getElementById("h-screen").style.display = "flex";
  let p = 0;
  const iv = setInterval(() => { p += 10; document.getElementById("p-bar").style.width = p + "%"; if(p >= 100) { clearInterval(iv); setup(); } }, 50);
}

function setup() {
  hideAll();
  document.getElementById("h-screen").style.display = "none";
  tP = parseInt(document.getElementById("pCount").value);
  
  const r = Math.random()*100; let c = 0;
  for(const t of mTypes) { c+=t.w; if(r<c){ rMT=t; break; } }

  rls = new Array(tP).fill(null);
  for(let i=0; i<tP; i++) {
    const sr = document.getElementById(`p${i}r`)?.value;
    if(sr && sr !== "none") rls[i] = sr;
  }

  if(!rls.includes("Î®∏Îçî")) rls[Math.floor(Math.random()*tP)] = "Î®∏Îçî";
  rls = rls.map(r => r || "ÏãúÎØº");

  // Ï§ëÎ≥µ Î∞©ÏßÄ Î∞∞Ï†ï Î°úÏßÅ
  const pool = getPool();
  aS = rls.map((role, i) => {
    if(role === "Î®∏Îçî" && rMT.n !== "Standard") return {n: rMT.n, d: rMT.d, s: rMT.n==="Eden"?"sk-eden":""};
    
    let rolePool = pool[role];
    if(rolePool && rolePool.length > 0) {
      const idx = Math.floor(Math.random() * rolePool.length);
      return rolePool.splice(idx, 1)[0]; // ÎΩëÏùÄ Îä•Î†•ÏùÄ ÌíÄÏóêÏÑú Ï†úÍ±∞ (Ï§ëÎ≥µ Î∞©ÏßÄ)
    }
    return {n:"Î¨¥Îä•Î†•", d:"Îä•Î†•Ïù¥ ÏóÜÏäµÎãàÎã§."};
  });

  cur = 0;
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("pNum").innerText = `PLAYER 1`;
}

function reveal() {
  hideAll();
  const r = rls[cur], s = aS[cur];
  const rd = document.getElementById("role");
  rd.innerText = r;
  rd.style.color = r==="Î®∏Îçî"?"var(--red)":r==="Î≥¥ÏïàÍ¥Ä"?"var(--blue)":r==="ÏùòÏÇ¨"?"var(--green)":"#555";
  document.getElementById("skill").innerText = s.n;
  document.getElementById("skill").className = s.s || "";
  document.getElementById("desc").innerText = s.d;
  document.getElementById("result").style.display = "block";
}

function next() {
  cur++;
  if(cur >= tP) {
    hideAll();
    document.getElementById("final-screen").style.display = "block";
    document.getElementById("fType").innerText = rMT.n;
    document.getElementById("fType").style.color = rMT.c;
    document.getElementById("fDesc").innerText = rMT.d;
    return;
  }
  hideAll();
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("pNum").innerText = `PLAYER ${cur+1}`;
}
</script>
</body>
</html>
